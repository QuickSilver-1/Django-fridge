<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://unpkg.com/html5-qrcode"></script>
	<title>QR code</title>
</head>
<body>
	<div id="qr-reader" style="width:500px"></div>
	<div id="qr-reader-results"></div>

</body>
<script type="text/javascript">
	var resultContainer = document.getElementById('qr-reader-results');
	var lastResult, countResults = 0;

	function onScanSuccess(decodedText, decodedResult) {
	    if (decodedText !== lastResult) {
	        ++countResults;
	        lastResult = decodedText;
	        // Handle on success condition with the decoded message.
	       	console.log(`${decodedText}`, decodedResult.result.format.formatName);
	       	type = decodedResult.result.format.formatName;
	       	if(type == "EAN_13"){
	       		window.location.href = '/check_qr_info/?type='+type+"&number="+decodedText;
	       	}
	       	else if(type == "DATA_MATRIX"){
	       		alert(decodedText);
	       		window.location.href = '/check_qr_info/?type='+type+"&number="+decodedText;
	       	}
	       	/*else{
	       		
	       		
	       	}*/
	        //
	    }
	}

	var html5QrcodeScanner = new Html5QrcodeScanner(
	    "qr-reader", { fps: 10, qrbox: 250 });
	html5QrcodeScanner.render(onScanSuccess);
</script>
</html>